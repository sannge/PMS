{
  "task_description": "Build a production-ready desktop Jira clone with OneNote-style note-taking. Features Application > Project > Task hierarchy, real-time collaboration via WebSockets, MinIO file storage, and comprehensive Playwright testing.",
  "scoped_services": ["electron-app", "fastapi-backend", "tests"],
  "files_to_modify": {
    "electron-app": [],
    "fastapi-backend": [],
    "tests": []
  },
  "files_to_create": {
    "electron-app": [
      "package.json",
      "electron-builder.json",
      "tailwind.config.js",
      "postcss.config.js",
      "tsconfig.json",
      "tsconfig.node.json",
      "components.json",
      "vite.config.ts",
      "electron.vite.config.ts",
      "src/main/index.ts",
      "src/main/ipc/handlers.ts",
      "src/preload/index.ts",
      "src/preload/index.d.ts",
      "src/renderer/index.html",
      "src/renderer/main.tsx",
      "src/renderer/App.tsx",
      "src/renderer/globals.css",
      "src/renderer/lib/utils.ts",
      "src/renderer/components/ui/*.tsx",
      "src/renderer/pages/*.tsx",
      "src/renderer/hooks/*.ts",
      "src/renderer/stores/*.ts",
      ".env"
    ],
    "fastapi-backend": [
      "requirements.txt",
      ".env",
      "app/__init__.py",
      "app/main.py",
      "app/config.py",
      "app/database.py",
      "app/models/__init__.py",
      "app/models/user.py",
      "app/models/application.py",
      "app/models/project.py",
      "app/models/task.py",
      "app/models/note.py",
      "app/models/attachment.py",
      "app/models/notification.py",
      "app/schemas/__init__.py",
      "app/schemas/user.py",
      "app/schemas/application.py",
      "app/schemas/project.py",
      "app/schemas/task.py",
      "app/schemas/note.py",
      "app/schemas/file.py",
      "app/schemas/notification.py",
      "app/routers/__init__.py",
      "app/routers/auth.py",
      "app/routers/applications.py",
      "app/routers/projects.py",
      "app/routers/tasks.py",
      "app/routers/notes.py",
      "app/routers/files.py",
      "app/routers/notifications.py",
      "app/services/__init__.py",
      "app/services/auth_service.py",
      "app/services/minio_service.py",
      "app/websocket/__init__.py",
      "app/websocket/manager.py",
      "app/websocket/handlers.py",
      "app/utils/__init__.py",
      "app/utils/security.py",
      "tests/__init__.py",
      "tests/conftest.py",
      "tests/test_auth.py",
      "tests/test_applications.py",
      "tests/test_projects.py",
      "tests/test_tasks.py",
      "tests/test_notes.py",
      "tests/test_minio.py",
      "tests/test_websocket.py",
      "alembic.ini",
      "alembic/env.py",
      "alembic/versions/"
    ],
    "tests": [
      "playwright.config.ts",
      "package.json",
      "e2e/auth.spec.ts",
      "e2e/applications.spec.ts",
      "e2e/projects.spec.ts",
      "e2e/tasks.spec.ts",
      "e2e/notes.spec.ts",
      "e2e/files.spec.ts",
      "e2e/collaboration.spec.ts"
    ]
  },
  "files_to_reference": [],
  "patterns": {
    "electron_ipc": {
      "description": "Secure IPC communication using contextBridge",
      "rules": [
        "Always use contextBridge.exposeInMainWorld for renderer APIs",
        "Never expose Node.js APIs directly to renderer",
        "contextIsolation: true is mandatory",
        "All IPC goes through defined channels"
      ]
    },
    "websocket_manager": {
      "description": "Room-based WebSocket connection management",
      "rules": [
        "Use ConnectionManager class for all WebSocket handling",
        "Support room-based connections for collaborative editing",
        "Always handle WebSocketDisconnect exceptions",
        "await websocket.accept() before any send/receive"
      ]
    },
    "shadcn_components": {
      "description": "ShadCN UI component installation and usage",
      "rules": [
        "Components live in src/renderer/components/ui/",
        "Add components via CLI: npx shadcn@latest add [component]",
        "Use path alias @/components for imports",
        "Requires Tailwind CSS configured first"
      ]
    },
    "fastapi_structure": {
      "description": "FastAPI project organization",
      "rules": [
        "Routers in app/routers/ with APIRouter",
        "Pydantic schemas in app/schemas/",
        "SQLAlchemy models in app/models/",
        "Business logic in app/services/",
        "Use dependency injection for database sessions"
      ]
    },
    "sql_server_connection": {
      "description": "SQL Server with SQLAlchemy",
      "rules": [
        "Use pyodbc driver: ODBC Driver 17 for SQL Server",
        "Connection string format: mssql+pyodbc://user:pass@host/db?driver=...",
        "Use NVARCHAR for Unicode strings",
        "Proper session cleanup with context managers"
      ]
    },
    "minio_integration": {
      "description": "MinIO object storage patterns",
      "rules": [
        "API port is 9000 (not 9001 which is console)",
        "secure=False for HTTP connections",
        "Use fput_object for file uploads from disk",
        "Always read/close response data from get_object",
        "Bucket names must be lowercase, DNS-compliant"
      ]
    }
  },
  "existing_implementations": {
    "description": "Greenfield project - no existing code",
    "relevant_files": []
  },
  "infrastructure_details": {
    "sql_server": {
      "server": "10.18.138.240",
      "database": "PMDB",
      "username": "pmdbuser",
      "password": "never!again",
      "driver": "ODBC Driver 17 for SQL Server"
    },
    "minio": {
      "api_endpoint": "10.18.136.10:9000",
      "console_url": "10.18.136.10:9001",
      "access_key": "minioadmin",
      "secret_key": "Windows2",
      "secure": false
    }
  },
  "created_at": "2026-01-17T02:13:39.834973"
}
