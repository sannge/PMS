---
phase: 02.1-onenote-knowledge-tree-redesign
plan: 14
type: execute
wave: 3
depends_on: ["02.1-07", "02.1-08"]
files_modified:
  - electron-app/src/renderer/components/knowledge/knowledge-sidebar.tsx
  - electron-app/src/renderer/components/knowledge/folder-tree-item.tsx
  - electron-app/src/renderer/pages/notes/index.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Create button is appropriately sized (not too big)"
    - "Search bar is positioned outside the sidebar panel"
  artifacts:
    - path: "electron-app/src/renderer/components/knowledge/knowledge-sidebar.tsx"
      provides: "Sidebar with properly sized create buttons and search positioning"
  key_links:
    - from: "knowledge-sidebar.tsx"
      to: "SearchBar"
      via: "Layout position"
      pattern: "SearchBar"
---

<objective>
Fix minor/cosmetic issues: create button too big, search bar should be outside the panel.

Purpose: Polish the UI to match user expectations for button sizing and search bar placement.

Output: Appropriately sized create buttons and repositioned search bar.
</objective>

<execution_context>
@C:\Users\samng\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\samng\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@electron-app/src/renderer/components/knowledge/knowledge-sidebar.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Resize create buttons to be more compact</name>
  <files>electron-app/src/renderer/components/knowledge/knowledge-sidebar.tsx</files>
  <action>
User reported: "Create document button is too big"

Current create buttons:
```tsx
<div className="flex items-center gap-1 px-2 py-1 border-b border-border">
  <button
    onClick={handleCreateDoc}
    className="p-1 rounded hover:bg-accent text-muted-foreground hover:text-foreground transition-colors"
    title="New document"
  >
    <FilePlus className="h-4 w-4" />
  </button>
  <button
    onClick={handleCreateFolder}
    className="p-1 rounded hover:bg-accent text-muted-foreground hover:text-foreground transition-colors"
    title="New folder"
  >
    <FolderPlus className="h-4 w-4" />
  </button>
</div>
```

The buttons themselves are small (icon only with p-1), but maybe the container padding or icon size makes them look big.

Options to make more compact:
1. Reduce container padding: `px-1 py-0.5` instead of `px-2 py-1`
2. Reduce icon size: `h-3.5 w-3.5` instead of `h-4 w-4`
3. Reduce button padding: `p-0.5` instead of `p-1`

Try:
```tsx
<div className="flex items-center gap-0.5 px-1.5 py-0.5 border-b border-border">
  <button
    onClick={handleCreateDoc}
    className="p-1 rounded hover:bg-accent text-muted-foreground hover:text-foreground transition-colors"
    title="New document"
  >
    <FilePlus className="h-3.5 w-3.5" />
  </button>
  <button
    onClick={handleCreateFolder}
    className="p-1 rounded hover:bg-accent text-muted-foreground hover:text-foreground transition-colors"
    title="New folder"
  >
    <FolderPlus className="h-3.5 w-3.5" />
  </button>
</div>
```

This makes the button area more compact without being too small to click.
  </action>
  <verify>
Visual inspection of code: button icons are h-3.5 w-3.5 (smaller than before).
Container padding is reduced.
  </verify>
  <done>
Create buttons are more compact and appropriately sized.
  </done>
</task>

<task type="auto">
  <name>Task 2: Reposition search bar outside the sidebar panel</name>
  <files>electron-app/src/renderer/components/knowledge/knowledge-sidebar.tsx, electron-app/src/renderer/pages/notes/index.tsx</files>
  <action>
User reported: "Search bar should be outside the panel"

This is an interesting request. Currently the search bar is inside the sidebar panel. "Outside the panel" could mean:
1. Above the entire sidebar/content area
2. In the header area
3. In a floating position

Looking at OneNote's design, the search is typically in a header area above the notebook tabs.

For consistency with the existing design, move search to be above the tab bar, outside the collapsible sidebar area.

**Note: This plan depends on 02.1-07 which handles the main layout structure.**

Option A: Move search to Notes page header (above sidebar):
```tsx
// In notes/index.tsx
<KnowledgeBaseProvider>
  <div className="flex flex-col h-full">
    {/* Search bar at top, full width */}
    <div className="px-4 py-2 border-b border-border">
      <SearchBar />
    </div>

    {/* Main content area */}
    <div className="flex flex-1 min-h-0">
      <KnowledgeSidebar />
      <main className="flex-1 ...">
        ...
      </main>
    </div>
  </div>
</KnowledgeBaseProvider>
```

Option B: Keep search in sidebar but above the collapse area (always visible):
This doesn't match "outside the panel" request.

Option C: Move search to the main content header area:
```tsx
// In the main content area, above the editor
<main className="flex-1 flex flex-col">
  <div className="px-4 py-2 border-b border-border">
    <SearchBar className="max-w-md" />
  </div>
  {/* Editor panel */}
  ...
</main>
```

Go with Option A (search above everything) for cleaner UX:

Update notes/index.tsx:
```tsx
export function NotesPage(): JSX.Element {
  return (
    <KnowledgeBaseProvider>
      <div className="flex flex-col h-full">
        {/* Global search bar - outside sidebar */}
        <div className="flex items-center gap-2 px-3 py-2 border-b border-border bg-background">
          <SearchBar className="flex-1 max-w-sm" />
        </div>

        {/* Content area */}
        <div className="flex flex-1 min-h-0">
          <KnowledgeSidebar />
          {/* Editor panel */}
          ...
        </div>
      </div>
    </KnowledgeBaseProvider>
  )
}
```

Then remove SearchBar from KnowledgeSidebar:
```tsx
// In knowledge-sidebar.tsx, remove:
// <div className="p-2 border-b border-border">
//   <SearchBar />
// </div>
```

Note: This only applies to the Notes page. KnowledgePanel (embedded in detail pages) should keep its own search bar inside the panel since it's a self-contained component.
  </action>
  <verify>
Grep for "SearchBar" in notes/index.tsx - should find it outside the sidebar.
Grep for "SearchBar" in knowledge-sidebar.tsx - should NOT find it (or find it conditionally hidden).
  </verify>
  <done>
Search bar is positioned above the sidebar (outside the panel) on the Notes page.
  </done>
</task>

</tasks>

<verification>
1. `cd electron-app && npm run typecheck` passes
2. Create buttons have smaller icon size (h-3.5 w-3.5)
3. Search bar is above sidebar in notes page layout
</verification>

<success_criteria>
- Create document/folder buttons are compact (not oversized)
- Search bar appears above the sidebar panel on Notes page
- Layout remains clean and usable
- Search still functions correctly (connected to context)
</success_criteria>

<output>
After completion, create `.planning/phases/02.1-onenote-knowledge-tree-redesign/02.1-14-SUMMARY.md`
</output>
